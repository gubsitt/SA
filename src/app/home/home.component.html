<div class="container wrapper fadeInDown">
  <div class="row justify-content-between">
    <!-- ฝั่งซ้าย: บันทึกรายรับ -->
    <div class="col-md-5 equal-height" id="formContent">
      <h2 class="active">บันทึกรายรับ</h2>
      <form (ngSubmit)="submitIncome()">
        <div class="mb-3">
          <label for="incomeAmount" class="form-label">จำนวนเงิน</label>
          <input type="number" id="incomeAmount" class="form-control" [(ngModel)]="income.amount" name="incomeAmount" required>
        </div>
        <div class="mb-3">
          <label for="incomeDescription" class="form-label">รายละเอียด</label>
          <input type="text" id="incomeDescription" class="form-control" [(ngModel)]="income.description" name="incomeDescription" required>
        </div>
        <div class="mb-3">
          <label for="incomeCategory" class="form-label">หมวดหมู่</label>
          <select id="incomeCategory" class="form-select" [(ngModel)]="income.categoryId" name="incomeCategory" required>
            <option *ngFor="let category of incomeCategories" [value]="category.CategoryId">{{ category.CategoryName }}</option>
          </select>
        </div>

        <!-- ยอดเงินคงเหลือ -->
        <div class="balance-box text-center mb-4">
          <h4>ยอดเงินคงเหลือ</h4>
          <h3>{{ balance | currency }}</h3>
        </div>

        <button type="submit" class="btn btn-primary">บันทึกรายรับ</button>
      </form>
    </div>

    <!-- ฝั่งขวา: ตารางรายรับ -->
    <div class="col-md-5" id="formContent">
      <h3 class="active">รายการรายรับ</h3>
      <table class="table" *ngIf="incomes && incomes.length > 0">
        <thead>
          <tr>
            <th>จำนวนเงิน</th>
            <th>รายละเอียด</th>
            <th>วันที่</th>
            <th>แก้ไข</th>
            <th>ลบ</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let income of incomes">
            <td>{{ income.amount | currency }}</td>
            <td>{{ income.description }}</td>
            <td>{{ income. date | date: 'short' }}</td>
            <td><button (click)="editIncome(income)">แก้ไข</button></td>
            <td><button (click)="deleteIncome(income.id)">ลบ</button></td>
          </tr>
        </tbody>
      </table>
      <div *ngIf="!incomes || incomes.length === 0">
        <p>ไม่มีข้อมูลรายรับ</p>
      </div>
    </div>
  </div>

  <div class="row justify-content-between mt-5">
    <!-- ฝั่งซ้าย: บันทึกรายจ่าย -->
    <div class="col-md-5" id="formContent">
      <h2 class="active">บันทึกรายจ่าย</h2>
      <form (ngSubmit)="submitExpense()">
        <div class="mb-3">
          <label for="expenseAmount" class="form-label">จำนวนเงิน</label>
          <input type="number" id="expenseAmount" class="form-control" [(ngModel)]="expense.amount" name="expenseAmount" required>
        </div>
        <div class="mb-3">
          <label for="expenseDescription" class="form-label">รายละเอียด</label>
          <input type="text" id="expenseDescription" class="form-control" [(ngModel)]="expense.description" name="expenseDescription" required>
        </div>
        <div class="mb-3">
          <label for="expenseCategory" class="form-label">หมวดหมู่</label>
          <select id="expenseCategory" class="form-select" [(ngModel)]="expense.categoryId" name="expenseCategory" required>
            <option *ngFor="let category of expenseCategories" [value]="category.CategoryId">{{ category.CategoryName }}</option>
          </select>
        </div>
        <div class="mb-3">
          <label for="isRecurring" class="form-label">รายจ่ายประจำ</label>
          <input type="checkbox" id="isRecurring" [(ngModel)]="expense.isRecurring" name="isRecurring">
        </div>
        <!-- ยอดเงินคงเหลือ -->
        <div class="balance-box text-center mb-4">
          <h4>ยอดเงินคงเหลือ</h4>
          <h3>{{ balance | currency }}</h3>
        </div>  

        <button type="submit" class="btn btn-primary">บันทึกรายจ่าย</button>
      </form>
    </div>

    <!-- ฝั่งขวา: ตารางรายจ่าย -->
    <div class="col-md-5" id="formContent">
      <h3 class="active">รายการรายจ่าย</h3>
      <table class="table" *ngIf="expenses && expenses.length > 0">
        <thead>
          <tr>
            <th>จำนวนเงิน</th>
            <th>รายละเอียด</th>
            <th>รายจ่ายประจำ</th>
            <th>วันที่</th>
            <th>แก้ไข</th>
            <th>ลบ</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let expense of expenses">
            <td>{{ expense.amount | currency }}</td>
            <td>{{ expense.description }}</td>
            <td>{{ expense.isRecurring ? 'ใช่' : 'ไม่ใช่' }}</td>
            <td>{{ expense.date | date:'short' }}</td>
            <td><button (click)="editExpense(expense)">แก้ไข</button></td>
            <td><button (click)="deleteExpense(expense.id)">ลบ</button></td>
          </tr>
        </tbody>
      </table>
      <div *ngIf="!expenses || expenses.length === 0">
        <p>ไม่มีข้อมูลรายจ่าย</p>
      </div>
    </div>
  </div>
</div>



